const APP_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwmO93dXEcNiVSynhABKf47iKZac_WvyKicipjhgMvlhu7VM7vmKasPd3wHZ1Dm04cF/exec";

document.getElementById('formData').addEventListener('submit', async (e) => {
  e.preventDefault();

  const file = document.getElementById('foto').files[0];
  let base64Image = "";

  if (file) {
    const reader = new FileReader();
    reader.readAsDataURL(file);
    base64Image = await new Promise((resolve) => {
      reader.onload = () => resolve(reader.result.split(",")[1]);
    });
  }

  const formData = new FormData();
  formData.append("tanggal", document.getElementById('tanggal').value);
  formData.append("item", document.getElementById('item').value);
  formData.append("qty", document.getElementById('qty').value);
  formData.append("keterangan", document.getElementById('keterangan').value);
  formData.append("image", base64Image);

  try {
    const response = await fetch(APP_SCRIPT_URL, { method: "POST", body: formData });
    const text = await response.text();
    document.getElementById('status').innerText = text;
    document.getElementById('formData').reset();
  } catch (error) {
    document.getElementById('status').innerText = "‚ùå Gagal mengirim data.";
  }
});
